Version 4
SHEET 1 1140 724
WIRE -544 32 -576 32
WIRE -432 32 -544 32
WIRE -304 32 -352 32
WIRE -240 32 -304 32
WIRE -192 32 -240 32
WIRE -48 32 -192 32
WIRE 80 32 -48 32
WIRE -48 112 -48 32
WIRE 80 112 80 32
WIRE -128 128 -160 128
WIRE -96 128 -128 128
WIRE -304 208 -304 32
WIRE -576 240 -576 32
WIRE -48 256 -48 192
WIRE 80 256 80 176
WIRE 80 256 -48 256
WIRE 160 256 80 256
WIRE 320 256 240 256
WIRE 400 256 320 256
WIRE 480 256 400 256
WIRE -240 272 -240 32
WIRE 400 320 400 256
WIRE 480 320 480 256
WIRE -48 384 -48 256
WIRE -576 496 -576 320
WIRE -304 496 -304 272
WIRE -304 496 -576 496
WIRE -240 496 -240 352
WIRE -240 496 -304 496
WIRE -48 496 -48 448
WIRE -48 496 -240 496
WIRE 400 496 400 384
WIRE 400 496 -48 496
WIRE 480 496 480 400
WIRE 480 496 400 496
WIRE 400 512 400 496
WIRE 96 576 32 576
WIRE 112 576 96 576
WIRE -272 592 -368 592
WIRE -48 592 -144 592
WIRE 64 608 32 608
WIRE -368 624 -368 592
WIRE 64 640 64 608
WIRE 96 640 64 640
WIRE 112 640 96 640
FLAG 400 512 0
FLAG 80 256 VLp
FLAG -544 32 vin
FLAG -128 128 c1
FLAG 96 640 c2
FLAG 96 576 c1
FLAG -96 176 0
FLAG -368 704 0
FLAG 320 256 vc2
FLAG -192 32 vc1
SYMBOL sw -48 208 M180
WINDOW 3 -115 59 Left 2
SYMATTR Value mysw
SYMATTR InstName S1
SYMBOL res 464 304 R0
SYMATTR InstName R1
SYMATTR Value 1
SYMBOL ind -448 48 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value .1m ic=2.5
SYMATTR SpiceLine Rser=1m Rpar=1Meg
SYMBOL voltage -576 224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 10
SYMBOL PWM -208 592 R0
SYMATTR InstName U1
SYMATTR SpiceLine VM=1V, fs={freq}
SYMATTR SpiceLine2 Dmin=0.001, Dmax=0.999, Voffset=0
SYMBOL dead_time -16 592 R0
SYMATTR InstName U2
SYMATTR SpiceLine Td=1n
SYMBOL voltage -368 608 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value .5
SYMBOL diode 96 176 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value myD
SYMBOL diode -32 448 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value myD
SYMBOL cap 384 320 R0
SYMATTR InstName C1
SYMATTR Value 1µ ic=5
SYMBOL cap -320 208 R0
SYMATTR InstName C2
SYMATTR Value .1m
SYMBOL ind 144 272 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value 12.5µ ic=5
SYMBOL res -256 256 R0
SYMATTR InstName R2
SYMATTR Value 3
TEXT -456 -120 Left 2 !.model mysw SW(Ron=1u Vt=.5 Vh=1m)
TEXT -464 -96 Left 2 !.tran {2000*1/freq} startup uic
TEXT -456 -224 Left 2 !.include /home/erik/Documents/Education/powerelectronics/AdvancedConverterControlTechniques/Libraries/switching.lib
TEXT -464 -192 Left 2 !.param freq=500e3 C2=1p
TEXT 128 -160 Left 2 !.meas TRAN iLavg AVG I(L1) FROM 320u TO 400u
TEXT 128 -112 Left 2 !.meas TRAN DTs TRIG V(Vlp)=5.1 TD=80u RISE=1 TARG V(Vlp)=5.1 TD=80u FALL=1
TEXT 128 -88 Left 2 !.meas TRAN D PARAM DTs/Ts
TEXT 128 -40 Left 2 !.meas TRAN Vc AVG V(VLp)-V(VLn) FROM 320u
TEXT 128 -136 Left 2 !.meas TRAN Ts TRIG V(Vlp)=5.1 TD=320u RISE=1 TARG V(Vlp)=5.1 TD=320u RISE=2
TEXT 128 -64 Left 2 !.meas TRAN iLpp PP I(L1) FROM 320u TO 322u
TEXT 128 -8 Left 2 !.meas TRAN Vg AVG V(vin) FROM 320u
TEXT 128 16 Left 2 !.meas TRAN M PARAM Vc/Vg
TEXT -464 -144 Left 2 !.model myD D(Ron=1u Vfwd=.1)
TEXT 192 136 Left 2 ;fc = 1/(2*pi*sqrt(LC))
TEXT 160 160 Left 2 ;C = 1/((fc * 2* pi)^2*L)
TEXT -464 -168 Left 2 !.model myZ D(Vrev=60)
TEXT 128 48 Left 2 !.meas TRAN Rc PARAM {Rcrit}
TEXT 304 96 Left 2 ;1/500kHz  = 2us
TEXT 168 192 Left 2 ;L2  = (Vg-V)*DTs/(2 *delta_IL2) = (5*.5*2us/(2*.2) = 5*1e-6*2.5 = 12.5uH
